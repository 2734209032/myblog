<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端性能优化 | hyh的博客</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="stylesheet" href="/myblog/styles/custom.css">
    <meta name="description" content="YYY">
    
    <link rel="preload" href="/myblog/assets/css/0.styles.99ff47a3.css" as="style"><link rel="preload" href="/myblog/assets/js/app.67ec3bdb.js" as="script"><link rel="preload" href="/myblog/assets/js/2.dd8fbd6f.js" as="script"><link rel="preload" href="/myblog/assets/js/20.828b7b6c.js" as="script"><link rel="prefetch" href="/myblog/assets/js/10.a692fbd4.js"><link rel="prefetch" href="/myblog/assets/js/11.08388110.js"><link rel="prefetch" href="/myblog/assets/js/12.9304c561.js"><link rel="prefetch" href="/myblog/assets/js/13.875e3a6f.js"><link rel="prefetch" href="/myblog/assets/js/14.e3ed33ee.js"><link rel="prefetch" href="/myblog/assets/js/15.ef10c68f.js"><link rel="prefetch" href="/myblog/assets/js/16.2fb0e083.js"><link rel="prefetch" href="/myblog/assets/js/17.7e5bedb7.js"><link rel="prefetch" href="/myblog/assets/js/18.867a9263.js"><link rel="prefetch" href="/myblog/assets/js/19.b5993274.js"><link rel="prefetch" href="/myblog/assets/js/21.4efad3bc.js"><link rel="prefetch" href="/myblog/assets/js/22.93df3f05.js"><link rel="prefetch" href="/myblog/assets/js/23.3df291bb.js"><link rel="prefetch" href="/myblog/assets/js/24.d714e6bf.js"><link rel="prefetch" href="/myblog/assets/js/25.4e628230.js"><link rel="prefetch" href="/myblog/assets/js/26.02d443e0.js"><link rel="prefetch" href="/myblog/assets/js/27.229fb0aa.js"><link rel="prefetch" href="/myblog/assets/js/28.19c55917.js"><link rel="prefetch" href="/myblog/assets/js/29.62aa02e9.js"><link rel="prefetch" href="/myblog/assets/js/3.39ee49ac.js"><link rel="prefetch" href="/myblog/assets/js/30.058aeae2.js"><link rel="prefetch" href="/myblog/assets/js/31.f836c422.js"><link rel="prefetch" href="/myblog/assets/js/32.46555af3.js"><link rel="prefetch" href="/myblog/assets/js/33.f56c013e.js"><link rel="prefetch" href="/myblog/assets/js/34.bd9f63a1.js"><link rel="prefetch" href="/myblog/assets/js/35.d743471b.js"><link rel="prefetch" href="/myblog/assets/js/36.077f181c.js"><link rel="prefetch" href="/myblog/assets/js/37.d0b5c7d8.js"><link rel="prefetch" href="/myblog/assets/js/38.2cfdc63a.js"><link rel="prefetch" href="/myblog/assets/js/39.855e7558.js"><link rel="prefetch" href="/myblog/assets/js/4.e647fabc.js"><link rel="prefetch" href="/myblog/assets/js/40.2a3c09fb.js"><link rel="prefetch" href="/myblog/assets/js/41.850c0782.js"><link rel="prefetch" href="/myblog/assets/js/42.aad90931.js"><link rel="prefetch" href="/myblog/assets/js/43.84ae1707.js"><link rel="prefetch" href="/myblog/assets/js/44.786e98ec.js"><link rel="prefetch" href="/myblog/assets/js/45.c854bb25.js"><link rel="prefetch" href="/myblog/assets/js/46.2faccb6b.js"><link rel="prefetch" href="/myblog/assets/js/47.a3721fe4.js"><link rel="prefetch" href="/myblog/assets/js/48.c6fd4fbd.js"><link rel="prefetch" href="/myblog/assets/js/49.27d7f1e1.js"><link rel="prefetch" href="/myblog/assets/js/5.ab7fc5be.js"><link rel="prefetch" href="/myblog/assets/js/50.07901204.js"><link rel="prefetch" href="/myblog/assets/js/51.421c10a9.js"><link rel="prefetch" href="/myblog/assets/js/52.9d64c6f3.js"><link rel="prefetch" href="/myblog/assets/js/53.8e83d8ba.js"><link rel="prefetch" href="/myblog/assets/js/54.d4b1503b.js"><link rel="prefetch" href="/myblog/assets/js/55.0c1150d7.js"><link rel="prefetch" href="/myblog/assets/js/56.6764b289.js"><link rel="prefetch" href="/myblog/assets/js/57.3baaab80.js"><link rel="prefetch" href="/myblog/assets/js/58.c1af3651.js"><link rel="prefetch" href="/myblog/assets/js/59.3c946394.js"><link rel="prefetch" href="/myblog/assets/js/6.996ed3a0.js"><link rel="prefetch" href="/myblog/assets/js/60.71e29c5d.js"><link rel="prefetch" href="/myblog/assets/js/61.5a09e80e.js"><link rel="prefetch" href="/myblog/assets/js/62.b96b02ee.js"><link rel="prefetch" href="/myblog/assets/js/63.9b9860ad.js"><link rel="prefetch" href="/myblog/assets/js/64.2c44e38f.js"><link rel="prefetch" href="/myblog/assets/js/65.b53500bd.js"><link rel="prefetch" href="/myblog/assets/js/66.36c974d0.js"><link rel="prefetch" href="/myblog/assets/js/67.d8808437.js"><link rel="prefetch" href="/myblog/assets/js/68.66d60f36.js"><link rel="prefetch" href="/myblog/assets/js/69.00a72619.js"><link rel="prefetch" href="/myblog/assets/js/7.97e4b019.js"><link rel="prefetch" href="/myblog/assets/js/70.1ec7f6c6.js"><link rel="prefetch" href="/myblog/assets/js/71.ccf10280.js"><link rel="prefetch" href="/myblog/assets/js/72.d820e71e.js"><link rel="prefetch" href="/myblog/assets/js/73.d4b547e5.js"><link rel="prefetch" href="/myblog/assets/js/74.21611aa5.js"><link rel="prefetch" href="/myblog/assets/js/75.9bdf7dad.js"><link rel="prefetch" href="/myblog/assets/js/76.791addff.js"><link rel="prefetch" href="/myblog/assets/js/77.fdb935e6.js"><link rel="prefetch" href="/myblog/assets/js/78.28c527d5.js"><link rel="prefetch" href="/myblog/assets/js/79.c9e40709.js"><link rel="prefetch" href="/myblog/assets/js/8.087c4b01.js"><link rel="prefetch" href="/myblog/assets/js/80.de18b040.js"><link rel="prefetch" href="/myblog/assets/js/81.c800f833.js"><link rel="prefetch" href="/myblog/assets/js/82.00bae400.js"><link rel="prefetch" href="/myblog/assets/js/83.35b8c102.js"><link rel="prefetch" href="/myblog/assets/js/84.3389ac8e.js"><link rel="prefetch" href="/myblog/assets/js/85.61a46c92.js"><link rel="prefetch" href="/myblog/assets/js/86.2ec2b9b4.js"><link rel="prefetch" href="/myblog/assets/js/9.429ff6ae.js">
    <link rel="stylesheet" href="/myblog/assets/css/0.styles.99ff47a3.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/myblog/" class="home-link router-link-active"><!----> <span class="site-name">hyh的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/myblog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端三剑客" class="dropdown-title"><!----> <span class="title" style="display:;">前端三剑客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/blogs/basics/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/myblog/blogs/basics/css/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/myblog/blogs/basics/javascript/" class="nav-link">JavaScript</a></li></ul></div></div><div class="nav-item"><a href="/myblog/blogs/basics/data.html" class="nav-link">前端资料网站</a></div><div class="nav-item"><a href="/myblog/blogs/basics/i18n.html" class="nav-link">国际化i18n</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/myblog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端三剑客" class="dropdown-title"><!----> <span class="title" style="display:;">前端三剑客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/blogs/basics/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/myblog/blogs/basics/css/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/myblog/blogs/basics/javascript/" class="nav-link">JavaScript</a></li></ul></div></div><div class="nav-item"><a href="/myblog/blogs/basics/data.html" class="nav-link">前端资料网站</a></div><div class="nav-item"><a href="/myblog/blogs/basics/i18n.html" class="nav-link">国际化i18n</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/myblog/" aria-current="page" class="sidebar-link">博客简介</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>面试篇</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myblog/pages/6cbb94/" class="sidebar-link">html面试题大全</a></li><li><a href="/myblog/pages/828be1/" class="sidebar-link">css面试题大全</a></li><li><a href="/myblog/pages/21b7bd/" class="sidebar-link">js面试题大全</a></li><li><a href="/myblog/pages/307985/" class="sidebar-link">vue2面试题大全</a></li><li><a href="/myblog/pages/e2ab2a/" class="sidebar-link">vue3面试题大全</a></li><li><a href="/myblog/pages/a1fd8f/" class="sidebar-link">浏览器面试题大全</a></li><li><a href="/myblog/pages/ceafae/" aria-current="page" class="active sidebar-link">性能优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/myblog/pages/ceafae/#_1-dns优化" class="sidebar-link">1.DNS优化</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/ceafae/#_2-图片懒加载" class="sidebar-link">2.图片懒加载</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/ceafae/#_3-重绘和回流" class="sidebar-link">3.重绘和回流</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/ceafae/#_4-documentfragment-是什么-用它跟直接操作-dom-的区别是什么" class="sidebar-link">4.documentFragment 是什么？用它跟直接操作 DOM 的区别是什么？</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/ceafae/#_5-如何提高webpack的打包速度" class="sidebar-link">5.如何提⾼webpack的打包速度?</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/ceafae/#_6-vue项目中的优化" class="sidebar-link">6.vue项目中的优化</a></li></ul></li><li><a href="/myblog/pages/291559/" class="sidebar-link">个人面试经历</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>js基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>es6基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ajax基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>git基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue2基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue3基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>node基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>lodash基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小程序基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器基础篇</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-41062720><div class="articleInfo" data-v-41062720><ul class="breadcrumbs" data-v-41062720><li data-v-41062720><a href="/myblog/" title="首页" class="iconfont icon-home router-link-active" data-v-41062720></a></li> <li data-v-41062720><a href="/myblog/categories/?category=blogs" title="分类" data-v-41062720>blogs</a></li><li data-v-41062720><a href="/myblog/categories/?category=browser" title="分类" data-v-41062720>browser</a></li></ul> <div class="info" data-v-41062720><!----> <div title="创建时间" class="date iconfont icon-riqi" data-v-41062720><a href="javascript:;" data-v-41062720>2023-07-05</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">前端性能优化<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="_1-dns优化"><a href="#_1-dns优化" class="header-anchor">#</a> 1.DNS优化</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>内容分发网络：
<span class="token constant">CDN</span> 可以提前把数据存在离用户最近的数据节点<span class="token punctuation">,</span>提高访问速度的目的
浏览器请求图片数据时，会先去 <span class="token constant">CDN</span> 缓存服务器获取。如果获取到数据，那么就直接返回，要我们提前在 <span class="token constant">CDN</span> 缓存服务器上传需要的资源，那么我们就可以极大地减少网络流量，同时减少网络延迟。
<span class="token constant">CDN</span> 的关键技术主要有内容存储和分发技术。简单来讲，<span class="token constant">CDN</span>就是根据用户位置分配最近的资源。
应用<span class="token constant">CDN</span>后，<span class="token constant">DNS</span> 返回的不再是 <span class="token constant">IP</span> 地址，而是一个<span class="token constant">CNAME</span><span class="token punctuation">(</span>Canonical Name <span class="token punctuation">)</span> 别名记录，指向<span class="token constant">CDN</span>的全局负载均衡。
<span class="token constant">CNAME</span>实际上在域名解析的过程中承担了中间人（或者说代理）的角色，这是<span class="token constant">CDN</span>实现的关键
<span class="token number">1.</span>浏览器发起图片 <span class="token constant">URL</span> 请求，经过本地 <span class="token constant">DNS</span> 解析，会将域名解析权交给域名 <span class="token constant">CNAME</span> 指向的 <span class="token constant">CDN</span> 专用 <span class="token constant">DNS</span> 服务器。
<span class="token number">2.</span><span class="token constant">CDN</span> 的 <span class="token constant">DNS</span> 服务器将 <span class="token constant">CDN</span> 的全局负载均衡设备 <span class="token constant">IP</span> 地址返回给浏览器。
<span class="token number">3.</span>浏览器向 <span class="token constant">CDN</span> 全局负载均衡设备发起 <span class="token constant">URL</span> 请求。
<span class="token number">4.</span><span class="token constant">CDN</span> 全局负载均衡设备根据用户 <span class="token constant">IP</span> 地址，以及用户请求的 <span class="token constant">URL</span>，选择一台用户所属区域的区域负载均衡设备，向其发起请求。
<span class="token number">5.</span>区域负载均衡设备会为用户选择最合适的 <span class="token constant">CDN</span> 缓存服务器（考虑的依据包括：服务器负载情况，距离用户的距离等），并返回给全局负载均衡设备。
<span class="token number">6.</span>全局负载均衡设备将选中的 <span class="token constant">CDN</span> 缓存服务器 <span class="token constant">IP</span> 地址返回给用户。
<span class="token number">7.</span>用户向 <span class="token constant">CDN</span> 缓存服务器发起请求，缓存服务器响应用户请求，最终将用户所需要偶的内容返回给浏览器。如果缓存服务器没有用户想要的内容，那么缓存服务器就会向它的上一级缓存服务器请求内容，以此类推，直到获取到需要的资源。最后如果还是没有，就会回到自己的服务器去获取资源。
<span class="token number">8.</span>使用 <span class="token constant">CDN</span> 服务的网站，只需要将域名解析权交给 <span class="token constant">CDN</span> 服务商，接着将需要分发的内容上传到 <span class="token constant">CDN</span>，就可以实现内容加速了！
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div> <p><img src="/myblog/assets/img/image-20230306195513652.12b259e4.png" alt="Algolia搜索"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>### <span class="token number">2.</span> <span class="token constant">CDN</span>的作用 

<span class="token constant">CDN</span>一般会用来托管Web资源（包括文本、图片和脚本等），可供下载的资源（媒体文件、软件、文档等），应用程序（门户网站等）。使用<span class="token constant">CDN</span>来加速这些资源的访问。
（<span class="token number">1</span>）在性能方面，引入<span class="token constant">CDN</span>的作用在于：
<span class="token operator">-</span> 用户收到的内容来自最近的数据中心，延迟更低，内容加载更快
<span class="token operator">-</span> 部分资源请求分配给了<span class="token constant">CDN</span>，减少了服务器的负载
（<span class="token number">2</span>）在安全方面，<span class="token constant">CDN</span>有助于防御DDoS、<span class="token constant">MITM</span>等网络攻击：
<span class="token operator">-</span> 针对DDoS：通过监控分析异常流量，限制其请求频率
<span class="token operator">-</span> 针对<span class="token constant">MITM</span>：从源服务器到 <span class="token constant">CDN</span> 节点到 <span class="token constant">ISP</span>（Internet Service Provider），全链路 <span class="token constant">HTTPS</span> 通信
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_2-图片懒加载"><a href="#_2-图片懒加载" class="header-anchor">#</a> 2.图片懒加载</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>懒加载也叫做延迟加载、按需加载，指的是在长网页中延迟加载图片数据，是一种较好的网页性能优化的方式。在比较长的网页或应用中，如果图片很多，所有的图片都被加载出来，而用户只能看到可视窗口的那一部分图片数据，这样就浪费了性能。在滚动屏幕之前，可视化区域之外的图片不会进行加载，在滚动屏幕时才加载。这样使得网页的加载速度更快，减少了服务器的负载。懒加载适用于图片较多，页面列表较长（长列表）的场景中。
懒加载的特点：
<span class="token number">1.</span><span class="token operator">**</span>减少无用资源的加载<span class="token operator">**</span>：使用懒加载明显减少了服务器的压力和流量，同时也减小了浏览器的负担。
<span class="token number">2.</span><span class="token operator">**</span>提升用户体验<span class="token operator">**</span><span class="token operator">:</span> 如果同时加载较多图片，可能需要等待的时间较长，这样影响了用户体验，而使用懒加载就能大大的提高用户体验。
<span class="token number">3.</span><span class="token operator">**</span>防止加载过多图片而影响其他资源文件的加载<span class="token operator">**</span> ：会影响网站应用的正常使用。
实现原理
图片的加载是由<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">src</span><span class="token template-punctuation string">`</span></span>引起的，当对<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">src</span><span class="token template-punctuation string">`</span></span>赋值时，浏览器就会请求图片资源。根据这个原理，我们使用<span class="token constant">HTML5</span> 的<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">data-xxx</span><span class="token template-punctuation string">`</span></span>属性来储存图片的路径，在需要加载图片的时候，将<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">data-xxx</span><span class="token template-punctuation string">`</span></span>中图片的路径赋值给<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">src</span><span class="token template-punctuation string">`</span></span>，这样就实现了图片的按需加载，即懒加载。
知识点
（<span class="token number">1</span>）<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">window.innerHeight</span><span class="token template-punctuation string">`</span></span> 是浏览器可视区的高度
（<span class="token number">2</span>）<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">document.body.scrollTop || document.documentElement.scrollTop</span><span class="token template-punctuation string">`</span></span> 是浏览器滚动的过的距离
（<span class="token number">3</span>）<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">imgs.offsetTop</span><span class="token template-punctuation string">`</span></span> 是元素顶部距离文档顶部的高度（包括滚动条的距离）
（<span class="token number">4</span>）图片加载条件：<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">img.offsetTop &lt; window.innerHeight + document.body.scrollTop;</span><span class="token template-punctuation string">`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div> <p><img src="/myblog/assets/img/image-20230306201348392.90f47fac.png" alt="Algolia搜索"></p> <p><strong>代码实现</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;container&quot;</span><span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;loading.gif&quot;</span>  data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">&quot;pic.png&quot;</span><span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;loading.gif&quot;</span>  data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">&quot;pic.png&quot;</span><span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;loading.gif&quot;</span>  data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">&quot;pic.png&quot;</span><span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;loading.gif&quot;</span>  data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">&quot;pic.png&quot;</span><span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;loading.gif&quot;</span>  data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">&quot;pic.png&quot;</span><span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;loading.gif&quot;</span>  data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">&quot;pic.png&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">var</span> imgs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">lozyLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> scrollTop <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
        <span class="token keyword">var</span> winHeight<span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> imgs<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>offsetTop <span class="token operator">&lt;</span> scrollTop <span class="token operator">+</span> winHeight <span class="token punctuation">)</span><span class="token punctuation">{</span>
                imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>src <span class="token operator">=</span> imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-src'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  window<span class="token punctuation">.</span>onscroll <span class="token operator">=</span> <span class="token function">lozyLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><strong>懒加载和预加载的区别</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>这两种方式都是提高网页性能的方式，两者主要区别是一个是提前加载，一个是迟缓甚至不加载。懒加载对服务器前端有一定的缓解压力作用，预加载则会增加服务器前端压力。

<span class="token operator">-</span> <span class="token operator">**</span>懒加载也叫延迟加载，指的是在长网页中延迟加载图片的时机，当用户需要访问时，再去加载<span class="token operator">**</span>，这样可以提高网站的首屏加载速度，提升用户的体验，并且可以减少服务器的压力。它适用于图片很多，页面很长的电商网站的场景。懒加载的实现原理是，将页面上的图片的 src 属性设置为空字符串，将图片的真实路径保存在一个自定义属性中，当页面滚动的时候，进行判断，如果图片进入页面可视区域内，则从自定义属性中取出真实路径赋值给图片的 src 属性，以此来实现图片的延迟加载。
<span class="token operator">-</span> <span class="token operator">**</span>预加载指的是将所需的资源提前请求加载到本地，这样后面在需要用到时就直接从缓存取资源。<span class="token operator">**</span>通过预加载能够减少用户的等待时间，提高用户的体验。我了解的预加载的最常用的方式是使用 js 中的 image 对象，通过为 image 对象来设置 scr 属性，来实现图片的预加载。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_3-重绘和回流"><a href="#_3-重绘和回流" class="header-anchor">#</a> 3.重绘和回流</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">**</span>减少回流与重绘的措施：<span class="token operator">**</span>

<span class="token operator">-</span> 操作<span class="token constant">DOM</span>时，尽量在低层级的<span class="token constant">DOM</span>节点进行操作
<span class="token operator">-</span> 不要使用<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">table</span><span class="token template-punctuation string">`</span></span>布局， 一个小的改动可能会使整个<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">table</span><span class="token template-punctuation string">`</span></span>进行重新布局
<span class="token operator">-</span> 使用<span class="token constant">CSS</span>的表达式
<span class="token operator">-</span> 不要频繁操作元素的样式，对于静态页面，可以修改类名，而不是样式。
<span class="token operator">-</span> 使用absolute或者fixed，使元素脱离文档流，这样他们发生变化就不会影响其他元素
<span class="token operator">-</span> 避免频繁操作<span class="token constant">DOM</span>，可以创建一个文档片段<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">documentFragment</span><span class="token template-punctuation string">`</span></span>，在它上面应用所有<span class="token constant">DOM</span>操作，最后再把它添加到文档中
<span class="token operator">-</span> 频繁操作元素将元素先脱离文档流，操作结束后再把它回归文档流。
<span class="token operator">-</span> 将<span class="token constant">DOM</span>的多个读操作（或者写操作）放在一起，而不是读写操作穿插着写。这得益于<span class="token operator">**</span>浏览器的渲染队列机制<span class="token operator">**</span>。
浏览器针对页面的回流与重绘，进行了自身的优化——<span class="token operator">**</span>渲染队列<span class="token operator">**</span>

<span class="token operator">**</span>浏览器会将所有的回流、重绘的操作放在一个队列中，当队列中的操作到了一定的数量或者到了一定的时间间隔，浏览器就会对队列进行批处理。这样就会让多次的回流、重绘变成一次回流重绘。<span class="token operator">**</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_4-documentfragment-是什么-用它跟直接操作-dom-的区别是什么"><a href="#_4-documentfragment-是什么-用它跟直接操作-dom-的区别是什么" class="header-anchor">#</a> 4.documentFragment 是什么？用它跟直接操作 DOM 的区别是什么？</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>与document相比，最大的区别是DocumentFragment不是真实 <span class="token constant">DOM</span> 树的一部分，它的变化不会触发 <span class="token constant">DOM</span> 树的重新渲染，且不会导致性能等问题。这样就大大提高了页面的性能。
<span class="token keyword">const</span> list <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#list'</span><span class="token punctuation">)</span> <span class="token comment">//ul</span>
<span class="token keyword">const</span> fruits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Apple'</span><span class="token punctuation">,</span> <span class="token string">'Orange'</span><span class="token punctuation">,</span> <span class="token string">'Banana'</span><span class="token punctuation">,</span> <span class="token string">'Melon'</span><span class="token punctuation">]</span>

<span class="token keyword">const</span> fragment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

fruits<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">fruit</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> li <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span>
  li<span class="token punctuation">.</span>textContent <span class="token operator">=</span> fruit
  fragment<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

list<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>fragment<span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_5-如何提高webpack的打包速度"><a href="#_5-如何提高webpack的打包速度" class="header-anchor">#</a> 5.如何提⾼<strong>webpack</strong>的打包速度**?**</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>（<span class="token number">1</span>）优化 Loader  
对于 Loader 来说，影响打包效率首当其冲必属 Babel 了。因为 Babel 会将代码转为字符串生成 <span class="token constant">AST</span>，然后对 <span class="token constant">AST</span> 继续进行转变最后再生成新的代码，项目越大，<span class="token operator">**</span>转换代码越多，效率就越低<span class="token operator">**</span>
    <span class="token number">1.</span>优化 Loader 的文件搜索范围
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// js 文件才使用 babel</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
        <span class="token comment">// 只在 src 文件夹下查找</span>
        <span class="token literal-property property">include</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">// 不会去查找的路径</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
还可以将 Babel 编译过的文件<span class="token operator">**</span>缓存<span class="token operator">**</span>起来，下次只需要编译更改过的代码文件即可，这样可以大幅度加快打包时间
<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'babel-loader?cacheDirectory=true'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="_6-vue项目中的优化"><a href="#_6-vue项目中的优化" class="header-anchor">#</a> 6.vue项目中的优化</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>一<span class="token punctuation">.</span>代码层的优化
<span class="token number">1</span><span class="token punctuation">.</span>v<span class="token operator">-</span><span class="token keyword">if</span> 和v<span class="token operator">-</span>show区分场景使用
v<span class="token operator">-</span><span class="token keyword">if</span>是真正的条件渲染，因为它会确保在切换过程中条件块内的事件监听器和子组件适当地被销毁和重建；也是惰性的：如果在初始渲染时条件为假，则什么也不做——直到条件第一次变为真时，才会开始渲染条件块。
v<span class="token operator">-</span>show，是在任何条件下，无论首次条件是否为真，都被编译，然后被缓存，而且<span class="token constant">DOM</span>元素保留；并且只是简单地基于 <span class="token constant">CSS</span> 的 display 属性进行切换。
优化：
所以，v<span class="token operator">-</span><span class="token keyword">if</span> 适用于在运行时很少改变条件，不需要频繁切换条件的场景；v<span class="token operator">-</span>show 则适用于需要非常频繁切换条件的场景
<span class="token number">2</span><span class="token punctuation">.</span>computed和watch分场景使用
computed： 是计算属性，依赖其它属性值，并且 computed 的值有缓存，只有它依赖的属性值发生改变，下一次获取 computed 的值时才会重新计算 computed  的值；
watch： 更多的是「观察」的作用，类似于某些数据的监听回调 ，每当监听的数据变化时都会执行回调进行后续操作；
<span class="token literal-property property">运用场景</span><span class="token operator">:</span>
当我们需要进行数值计算，并且依赖于其它数据时，应该使用 computed，因为可以利用 computed 的缓存特性，避免每次获取值时，都要重新计算；
当我们需要在数据变化时执行异步或开销较大的操作时，应该使用 watch，使用 watch <span class="token function">选项允许我们执行异步操作</span> <span class="token punctuation">(</span> 访问一个 <span class="token constant">API</span> <span class="token punctuation">)</span>，限制我们执行该操作的频率，并在我们得到最终结果前，设置中间状态。这些都是计算属性无法做到的。
<span class="token number">3</span><span class="token punctuation">.</span>v<span class="token operator">-</span><span class="token keyword">for</span> 遍历必须为 item 添加 key，且避免同时使用 v<span class="token operator">-</span><span class="token keyword">if</span>
（<span class="token number">1</span>）v<span class="token operator">-</span><span class="token keyword">for</span> 遍历必须为 item 添加 key
加key的原因是，当我们更新dom时，vue的就地复用策略，diff算法对比新旧虚拟dom，如果不加key，则会去遍历查找，对应的新旧虚拟dom，
当更新的内容过多，则十分消耗性能，加了key的话，想当于新旧虚拟dom是一种map映射的方式，速度就很快
（<span class="token number">2</span>）v<span class="token operator">-</span><span class="token keyword">for</span> 遍历避免同时使用 v<span class="token operator">-</span><span class="token keyword">if</span>
v<span class="token operator">-</span><span class="token keyword">for</span> 比 v<span class="token operator">-</span><span class="token keyword">if</span> 优先级高，如果每一次都需要遍历整个数组，将会影响速度，尤其是当之需要渲染很小一部分的时候，必要情况下应该替换成 computed 属性。
例如：
<span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li
    v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;user in activeUsers&quot;</span>
    <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;user.id&quot;</span><span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span> user<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
<span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">activeUsers</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> user<span class="token punctuation">.</span>isActive  <span class="token comment">//筛选我们需要展示的数据</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">4.</span>长列表性能优化
Vue 会通过 Object<span class="token punctuation">.</span>defineProperty 对数据进行劫持，来实现视图响应数据的变化，然而有些时候我们的组件就是纯粹的数据展示，不会有任何改变，我们就不需要 Vue 来劫持我们的数据，在大量数据展示的情况下，这能够很明显的减少组件初始化的时间，那如何禁止 Vue 劫持我们的数据呢？可以通过 Object<span class="token punctuation">.</span>freeze 方法来冻结一个对象，一旦被冻结的对象就再也不能被修改了。
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">users</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">async</span> <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/api/users&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>users <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token number">5.</span>事件销毁
vue组件销毁的时候，会自动清理它与其他实例的连接，解绑它的全部指令以及事件监听器，但是仅限于组件本身的事件，原生js的事件包括全局的一些方法比如定时器，就不会被销毁，就会造成内存泄漏，解决方法
<span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>click<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">beforeDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>click<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token number">6.</span>图片懒加载
对于图片过多的页面，为了加速页面加载速度，所以很多时候我们需要将页面内未出现在可视区域内的图片先不做加载， 等到滚动到可视区域后再去加载。这样对于页面加载性能上会有很大的提升，也提高了用户体验。我们在项目中使用 Vue 的 vue<span class="token operator">-</span>lazyload 插件：
<span class="token number">6.1</span>安装插件
  npm install vue<span class="token operator">-</span>lazyload <span class="token operator">--</span>save<span class="token operator">-</span>dev
<span class="token number">6.2</span>在入口文件main<span class="token punctuation">.</span>js中引入并使用
<span class="token keyword">import</span> VueLazyload <span class="token keyword">from</span> <span class="token string">'vue-lazyload'</span>
<span class="token number">6.3</span>安装这个插件
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueLazyload<span class="token punctuation">)</span>
如果要添加自定义项的话
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueLazyload<span class="token punctuation">,</span> <span class="token punctuation">{</span>
<span class="token literal-property property">preLoad</span><span class="token operator">:</span> <span class="token number">1.3</span><span class="token punctuation">,</span>
<span class="token literal-property property">error</span><span class="token operator">:</span> <span class="token string">'dist/error.png'</span><span class="token punctuation">,</span>  <span class="token comment">//加载图片失败时的src</span>
<span class="token literal-property property">loading</span><span class="token operator">:</span> <span class="token string">'dist/loading.gif'</span><span class="token punctuation">,</span> <span class="token comment">//加载图片时的src</span>
<span class="token literal-property property">attempt</span><span class="token operator">:</span> <span class="token number">1</span>            <span class="token comment">//尝试计数</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token number">6.4</span>在 vue 文件中将 img 标签的 src 属性直接改为 v<span class="token operator">-</span>lazy ，从而将图片显示方式更改为懒加载显示
   <span class="token operator">&lt;</span>img v<span class="token operator">-</span>lazy<span class="token operator">=</span><span class="token string">&quot;/static/img/1.png&quot;</span><span class="token operator">&gt;</span>
<span class="token number">7.</span>路由懒加载
Vue  是单页面应用，可能会有很多的路由引入 ，这样使用 webpcak 打包后的文件很大，当进入首页时，加载的资源过多，页面会出现白屏的情况，不利于用户体验。如果我们能把不同路由对应的组件分割成不同的代码块，然后当路由被访问的时候才加载对应的组件，这样就更加高效了。这样会大大提高首屏显示的速度，但是可能其他的页面的速度就会降下来。
<span class="token keyword">const</span> <span class="token function-variable function">Foo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./Foo.vue'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/foo'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> Foo <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token number">8.</span>第三方插件的按需引入
我们在项目中经常会需要引入第三方插件，如果我们直接引入整个插件，会导致项目的体积太大，我们可以借助 babel<span class="token operator">-</span>plugin<span class="token operator">-</span>component ，然后可以只引入需要的组件，以达到减小项目体积的目的。以下为项目中引入 element<span class="token operator">-</span>ui 组件库为例：
<span class="token number">8.1</span>安装
npm install babel<span class="token operator">-</span>plugin<span class="token operator">-</span>component <span class="token operator">-</span><span class="token constant">D</span>
<span class="token number">8.2</span>然后，将 <span class="token punctuation">.</span>babelrc 修改为：
<span class="token punctuation">{</span>
  <span class="token string-property property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;es2015&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;modules&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">&quot;component&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;libraryName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;element-ui&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;styleLibraryName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;theme-chalk&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token number">8.3</span>在main<span class="token punctuation">.</span>js中引入部分组件
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Select <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'element-ui'</span><span class="token punctuation">;</span>
 Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Button<span class="token punctuation">)</span>
 Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Select<span class="token punctuation">)</span>
<span class="token number">9.</span>优化无限列表性能
如果你的应用存在非常长或者无限滚动的列表，那么需要采用 窗口化 的技术来优化性能，只需要渲染少部分区域的内容，减少重新渲染组件和创建 dom 节点的时间。你可以参考以下开源项目 vue<span class="token operator">-</span>virtual<span class="token operator">-</span>scroll<span class="token operator">-</span>list 和 vue<span class="token operator">-</span>virtual<span class="token operator">-</span>scroller  来优化这种无限列表的场景的。
<span class="token number">10.</span>服务端渲染和预渲染
如果你的应用存在非常长或者无限滚动的列表，那么需要采用 窗口化 的技术来优化性能，只需要渲染少部分区域的内容，减少重新渲染组件和创建 dom 节点的时间。你可以参考以下开源项目 vue<span class="token operator">-</span>virtual<span class="token operator">-</span>scroll<span class="token operator">-</span>list 和 vue<span class="token operator">-</span>virtual<span class="token operator">-</span>scroller  来优化这种无限列表的场景的。
更有利于搜索引擎
因为 <span class="token constant">SPA</span> 页面的内容是通过 Ajax 获取，而搜索引擎爬取工具并不会等待 Ajax 异步完成后再抓取页面内容，所以在 <span class="token constant">SPA</span> 中是抓取不到页面通过 Ajax 获取到的内容；而 <span class="token constant">SSR</span> 是直接由服务端返回已经渲染好的页面（数据已经包含在页面中），所以搜索引擎爬取工具可以抓取渲染好的页面；
<span class="token number">11.</span><span class="token constant">CND</span>
<span class="token number">12</span><span class="token punctuation">.</span>gzip压缩
<span class="token number">13.</span>浏览器缓存
<span class="token number">14.</span>使用 Chrome Performance 查找性能瓶颈
Chrome 的 <span class="token function">Performance</span><span class="token punctuation">(</span>性能<span class="token punctuation">)</span> 面板可以录制一段时间内的 js 执行细节及时间。使用 Chrome 开发者工具分析页面性能的步骤如下。
打开 Chrome 开发者工具，切换到 Performance 面板
点击 Record 开始录制
刷新页面或展开某个节点
点击 Stop 停止录制
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br></div></div></div></div> <!----> <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/myblog/pages/a1fd8f/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">浏览器面试题大全</div></a> <a href="/myblog/pages/291559/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">个人面试经历</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/myblog/pages/a1fd8f/" class="prev">浏览器面试题大全</a></span> <span class="next"><a href="/myblog/pages/291559/">个人面试经历</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/myblog/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/myblog/" class="router-link-active"><div>
            首页
            <!----></div></a> <span class="date"></span></dt></dl><dl><dd>02</dd> <dt><a href="/myblog/pages/2faf0d/"><div>
            vscode操作git
            <!----></div></a> <span class="date">07-10</span></dt></dl><dl><dd>03</dd> <dt><a href="/myblog/pages/e6d2d9/"><div>
            前端资料网站
            <!----></div></a> <span class="date">07-10</span></dt></dl> <dl><dd></dd> <dt><a href="/myblog/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> <!----></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/myblog/assets/js/app.67ec3bdb.js" defer></script><script src="/myblog/assets/js/2.dd8fbd6f.js" defer></script><script src="/myblog/assets/js/20.828b7b6c.js" defer></script>
  </body>
</html>
