<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue3选项式qpi总结 | hyh的博客</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="stylesheet" href="/myblog/styles/custom.css">
    <meta name="description" content="YYY">
    
    <link rel="preload" href="/myblog/assets/css/0.styles.b7a98234.css" as="style"><link rel="preload" href="/myblog/assets/js/app.20d60f97.js" as="script"><link rel="preload" href="/myblog/assets/js/2.5c9bfcd5.js" as="script"><link rel="preload" href="/myblog/assets/js/7.c837cdb8.js" as="script"><link rel="prefetch" href="/myblog/assets/js/10.396635fc.js"><link rel="prefetch" href="/myblog/assets/js/11.3f3cd1d4.js"><link rel="prefetch" href="/myblog/assets/js/12.facbbac8.js"><link rel="prefetch" href="/myblog/assets/js/13.be1bc3ee.js"><link rel="prefetch" href="/myblog/assets/js/14.93f9ec4c.js"><link rel="prefetch" href="/myblog/assets/js/15.972ca597.js"><link rel="prefetch" href="/myblog/assets/js/16.96c6402c.js"><link rel="prefetch" href="/myblog/assets/js/17.c380dd16.js"><link rel="prefetch" href="/myblog/assets/js/18.0329f85f.js"><link rel="prefetch" href="/myblog/assets/js/19.7a54f116.js"><link rel="prefetch" href="/myblog/assets/js/20.622eaebc.js"><link rel="prefetch" href="/myblog/assets/js/21.d13c3881.js"><link rel="prefetch" href="/myblog/assets/js/22.a1e4bbec.js"><link rel="prefetch" href="/myblog/assets/js/23.92aa9d3b.js"><link rel="prefetch" href="/myblog/assets/js/24.5de94bd2.js"><link rel="prefetch" href="/myblog/assets/js/25.ca98104b.js"><link rel="prefetch" href="/myblog/assets/js/26.1054efb3.js"><link rel="prefetch" href="/myblog/assets/js/27.72aa55cd.js"><link rel="prefetch" href="/myblog/assets/js/28.15e6ec4b.js"><link rel="prefetch" href="/myblog/assets/js/29.037ec09a.js"><link rel="prefetch" href="/myblog/assets/js/3.02e8bbf5.js"><link rel="prefetch" href="/myblog/assets/js/30.1dd7ed6e.js"><link rel="prefetch" href="/myblog/assets/js/31.ce9b66da.js"><link rel="prefetch" href="/myblog/assets/js/32.822bdf0c.js"><link rel="prefetch" href="/myblog/assets/js/33.a2a04065.js"><link rel="prefetch" href="/myblog/assets/js/34.b217471a.js"><link rel="prefetch" href="/myblog/assets/js/35.92f19e9b.js"><link rel="prefetch" href="/myblog/assets/js/36.f575944e.js"><link rel="prefetch" href="/myblog/assets/js/37.fa7ba34f.js"><link rel="prefetch" href="/myblog/assets/js/38.f85a42c1.js"><link rel="prefetch" href="/myblog/assets/js/39.396f79d6.js"><link rel="prefetch" href="/myblog/assets/js/4.ad53e12a.js"><link rel="prefetch" href="/myblog/assets/js/40.09ff1f80.js"><link rel="prefetch" href="/myblog/assets/js/41.ad06ce2d.js"><link rel="prefetch" href="/myblog/assets/js/42.a20dccc7.js"><link rel="prefetch" href="/myblog/assets/js/43.26998938.js"><link rel="prefetch" href="/myblog/assets/js/44.d8031636.js"><link rel="prefetch" href="/myblog/assets/js/45.3e8874d7.js"><link rel="prefetch" href="/myblog/assets/js/46.a551296e.js"><link rel="prefetch" href="/myblog/assets/js/47.e6e547b4.js"><link rel="prefetch" href="/myblog/assets/js/48.74882b99.js"><link rel="prefetch" href="/myblog/assets/js/49.3d2fc74c.js"><link rel="prefetch" href="/myblog/assets/js/5.ed4de7f6.js"><link rel="prefetch" href="/myblog/assets/js/50.56a23422.js"><link rel="prefetch" href="/myblog/assets/js/51.ed163c3c.js"><link rel="prefetch" href="/myblog/assets/js/52.9d1b615b.js"><link rel="prefetch" href="/myblog/assets/js/53.7c1287ae.js"><link rel="prefetch" href="/myblog/assets/js/54.f6482c62.js"><link rel="prefetch" href="/myblog/assets/js/55.5f1e4fbe.js"><link rel="prefetch" href="/myblog/assets/js/56.33cb7b6b.js"><link rel="prefetch" href="/myblog/assets/js/57.9d225d25.js"><link rel="prefetch" href="/myblog/assets/js/58.4f9665c8.js"><link rel="prefetch" href="/myblog/assets/js/59.80f8cc6b.js"><link rel="prefetch" href="/myblog/assets/js/6.08a51b40.js"><link rel="prefetch" href="/myblog/assets/js/60.08065889.js"><link rel="prefetch" href="/myblog/assets/js/61.f288f013.js"><link rel="prefetch" href="/myblog/assets/js/62.936926b0.js"><link rel="prefetch" href="/myblog/assets/js/63.d17fc059.js"><link rel="prefetch" href="/myblog/assets/js/64.6169d337.js"><link rel="prefetch" href="/myblog/assets/js/65.b50ced0c.js"><link rel="prefetch" href="/myblog/assets/js/66.2ccbcc98.js"><link rel="prefetch" href="/myblog/assets/js/67.8157d895.js"><link rel="prefetch" href="/myblog/assets/js/68.78696f04.js"><link rel="prefetch" href="/myblog/assets/js/69.eff0e18e.js"><link rel="prefetch" href="/myblog/assets/js/70.21530e91.js"><link rel="prefetch" href="/myblog/assets/js/71.185eeac5.js"><link rel="prefetch" href="/myblog/assets/js/72.141cb02e.js"><link rel="prefetch" href="/myblog/assets/js/73.198fd4af.js"><link rel="prefetch" href="/myblog/assets/js/74.ffbe268e.js"><link rel="prefetch" href="/myblog/assets/js/75.ce112d77.js"><link rel="prefetch" href="/myblog/assets/js/76.6eda04b9.js"><link rel="prefetch" href="/myblog/assets/js/77.1dc6eb7c.js"><link rel="prefetch" href="/myblog/assets/js/78.09194743.js"><link rel="prefetch" href="/myblog/assets/js/79.aff2eda5.js"><link rel="prefetch" href="/myblog/assets/js/8.b2831f27.js"><link rel="prefetch" href="/myblog/assets/js/80.5743f85a.js"><link rel="prefetch" href="/myblog/assets/js/81.45739b30.js"><link rel="prefetch" href="/myblog/assets/js/82.0ec4722d.js"><link rel="prefetch" href="/myblog/assets/js/9.7809a3fa.js">
    <link rel="stylesheet" href="/myblog/assets/css/0.styles.b7a98234.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/myblog/" class="home-link router-link-active"><!----> <span class="site-name">hyh的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/myblog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端三剑客" class="dropdown-title"><!----> <span class="title" style="display:;">前端三剑客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/blogs/basics/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/myblog/blogs/basics/css/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/myblog/blogs/basics/javascript/" class="nav-link">JavaScript</a></li></ul></div></div><div class="nav-item"><a href="/myblog/CSS/" class="nav-link">CSS</a></div><div class="nav-item"><a href="/myblog/JavaScript/" class="nav-link">JavaScript</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/myblog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端三剑客" class="dropdown-title"><!----> <span class="title" style="display:;">前端三剑客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/blogs/basics/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/myblog/blogs/basics/css/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/myblog/blogs/basics/javascript/" class="nav-link">JavaScript</a></li></ul></div></div><div class="nav-item"><a href="/myblog/CSS/" class="nav-link">CSS</a></div><div class="nav-item"><a href="/myblog/JavaScript/" class="nav-link">JavaScript</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/myblog/" aria-current="page" class="sidebar-link">博客简介</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>面试篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>js基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>es6基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ajax基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>git基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue2基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>vue3基础篇</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myblog/pages/59f790/" class="sidebar-link">vue3基础第一天</a></li><li><a href="/myblog/pages/5875b3/" class="sidebar-link">vue3基础第二天</a></li><li><a href="/myblog/pages/56c597/" class="sidebar-link">vue3移动端</a></li><li><a href="/myblog/pages/8ca6e6/" aria-current="page" class="active sidebar-link">vue3基础总结</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_1-创建vue3项目" class="sidebar-link">1.创建vue3项目</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_2-vue3变化" class="sidebar-link">2.vue3变化</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_3-以上的数据并没有响应式" class="sidebar-link">3.以上的数据并没有响应式</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_4-ref函数处理对象类型" class="sidebar-link">4.ref函数处理对象类型</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_5-reactive函数" class="sidebar-link">5.reactive函数</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_6-vue2中的响应式" class="sidebar-link">6.vue2中的响应式</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_7-vue3实现响应式" class="sidebar-link">7.vue3实现响应式</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_8-reactive对比ref" class="sidebar-link">8.reactive对比ref</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_9-setup的两个注意点" class="sidebar-link">9.setup的两个注意点</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_10-computed函数" class="sidebar-link">10.computed函数</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_11-wacth函数监听ref基本数据类型" class="sidebar-link">11.wacth函数监听ref基本数据类型</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_12-watch时value的问题" class="sidebar-link">12.watch时value的问题</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_13-watcheffect函数" class="sidebar-link">13.watchEffect函数</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_14-vue3中的生命周期" class="sidebar-link">14.vue3中的生命周期</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_15-自定义hook函数" class="sidebar-link">15.自定义hook函数</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_16-toref和torefs" class="sidebar-link">16.toRef和toRefs</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_17-shallowreactive与shallowref" class="sidebar-link">17.shallowReactive与shallowRef</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_18-readonly与shallowreadonly" class="sidebar-link">18.readonly与shallowReadonly</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_19-toraw与markraw" class="sidebar-link">19.toRaw与markRaw</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_20-customref" class="sidebar-link">20.customRef</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_21-provide和inject" class="sidebar-link">21.provide和inject</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_22-响应式数据的判断" class="sidebar-link">22.响应式数据的判断</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_23-组合式api的优势" class="sidebar-link">23.组合式API的优势</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_24-fragment" class="sidebar-link">24.Fragment</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_25-teleport" class="sidebar-link">25.teleport</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_26-suspense" class="sidebar-link">26.Suspense</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_27-vue3的调整" class="sidebar-link">27.vue3的调整</a></li><li class="sidebar-sub-header level2"><a href="/myblog/pages/8ca6e6/#_28-数据副作用" class="sidebar-link">28.数据副作用</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>node基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>lodash基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小程序基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器基础篇</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/myblog/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/myblog/categories/?category=blogs" title="分类" data-v-06225672>blogs</a></li><li data-v-06225672><a href="/myblog/categories/?category=vue3" title="分类" data-v-06225672>vue3</a></li></ul> <div class="info" data-v-06225672><!----> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-07-07</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">vue3选项式qpi总结<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="_1-创建vue3项目"><a href="#_1-创建vue3项目" class="header-anchor">#</a> 1.创建vue3项目</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>npm init vite<span class="token operator">-</span>app <span class="token string">'项目名称'</span>
cd 进入项目
npm i 安装依赖
npm run dev 启动项目
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_2-vue3变化"><a href="#_2-vue3变化" class="header-anchor">#</a> 2.vue3变化</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>vue3最大的特点就是组合式api
<span class="token number">1.</span> vue3中的组件模板可以没有根标签
<span class="token number">2</span><span class="token punctuation">.</span>vue3中的数据和方法，都写在setup函数中<span class="token punctuation">,</span>setup必须有返回值，若返回的是一个对象，则对象中的属性和方法在模板中可以直接使用，setup不能是<span class="token keyword">async</span><span class="token function">函数，因为返回值是promise了</span><span class="token punctuation">(</span>后期也可以返回一个Promise实例，但需要Suspense和异步组件的配合<span class="token punctuation">)</span>
<span class="token literal-property property">eag</span><span class="token operator">:</span>
<span class="token comment">// App.vue</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'App'</span><span class="token punctuation">,</span>
<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'哈'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token keyword">return</span><span class="token punctuation">{</span>
      name<span class="token punctuation">,</span>
      fn
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">3.</span>尽量不要与vue2配置混用
<span class="token function">vue2配置</span><span class="token punctuation">(</span>data，methods，computed<span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">)</span>中可以访问到setup中的属性、方法
<span class="token function">但在setup中不能访问到vue2配置</span><span class="token punctuation">(</span>data，methods，computed<span class="token operator">...</span><span class="token punctuation">)</span>
如果vue2和vue3的配置项重名，则setup也就是vue3配置优先
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="_3-以上的数据并没有响应式"><a href="#_3-以上的数据并没有响应式" class="header-anchor">#</a> 3.以上的数据并没有响应式</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>需要响应式则需要引入ref函数
<span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'哈哈'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        name<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'xixi'</span>  <span class="token comment">//需要加上value</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_4-ref函数处理对象类型"><a href="#_4-ref函数处理对象类型" class="header-anchor">#</a> 4.ref函数处理对象类型</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//vue3中处理基本数据类型用的还是Object.defineProperty,处理对象的话如果是用的ref是借用的是proxy封装的reactive函数</span>
 <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>岗位<span class="token punctuation">{</span><span class="token punctuation">{</span> obj<span class="token punctuation">.</span>qija<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>薪水<span class="token punctuation">{</span><span class="token punctuation">{</span> obj<span class="token punctuation">.</span>sex<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token comment">//数据响应式必须要引入ref函数</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">sex</span><span class="token operator">:</span><span class="token number">18000</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qija</span><span class="token operator">:</span><span class="token string">'前端开发'</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      obj<span class="token punctuation">.</span>value<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token number">200000</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>value<span class="token punctuation">)</span>    
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span><span class="token punctuation">{</span>
      fn<span class="token punctuation">,</span>
      obj
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p><img src="/myblog/assets/img/image-20230311195850747.32983e9b.png" alt="Algolia搜索"> <img src="/myblog/assets/img/image-20230311200545304.0b50a72b.png" alt="Algolia搜索"></p> <h2 id="_5-reactive函数"><a href="#_5-reactive函数" class="header-anchor">#</a> 5.reactive函数</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//一般基本数据类型用ref 对象、数组的话用的是reactive函数</span>
<span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>姓名<span class="token punctuation">{</span><span class="token punctuation">{</span> obj<span class="token punctuation">.</span>a<span class="token punctuation">.</span>b<span class="token punctuation">.</span>c <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>年龄<span class="token punctuation">{</span><span class="token punctuation">{</span>  age<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;fn&quot;</span><span class="token operator">&gt;</span>点击<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token comment">//数据响应式必须要引入ref函数</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">,</span>reactive<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> obj <span class="token operator">=</span><span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">b</span><span class="token operator">:</span><span class="token punctuation">{</span>
          <span class="token literal-property property">c</span><span class="token operator">:</span><span class="token number">10</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>a<span class="token punctuation">.</span>b<span class="token punctuation">.</span>c<span class="token punctuation">)</span>  <span class="token comment">//在js中获取对象，不用像ref函数一样,obj.value.a.b.c获取了</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span><span class="token punctuation">{</span>
      fn<span class="token punctuation">,</span>
      obj<span class="token punctuation">,</span>
      age
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="_6-vue2中的响应式"><a href="#_6-vue2中的响应式" class="header-anchor">#</a> 6.vue2中的响应式</h2> <p><strong>实现原理</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>对象类型：通过Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">对属性的读取、修改进行拦截</span><span class="token punctuation">(</span>数据劫持<span class="token punctuation">)</span>
<span class="token function">数组类型：通过重写更新数组一系列方法来实现拦截。</span><span class="token punctuation">(</span>对数组的变更方法进行了包裹<span class="token punctuation">)</span>
<span class="token literal-property property">eag</span><span class="token operator">:</span> 数组中的push 做了两件事，<span class="token number">1.</span>正常调用数组的push方法 <span class="token number">2.</span>更新页面  <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>push <span class="token operator">===</span> vue2中的push <span class="token comment">//false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>存在问题</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1.</span>新增属性、删除属性，界面不会更新
<span class="token number">2.</span>直接通过下标修改数组，界面不会自动更新
<span class="token comment">//但这个不是Object.defineProperty()的缺陷，由玉溪说过，是因为用户体验和性能代价不成正比</span>
解决办法： <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span>对象，对象属性，属性值<span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>$<span class="token keyword">delete</span><span class="token punctuation">(</span>对象，属性<span class="token punctuation">)</span>
<span class="token literal-property property">或者</span><span class="token operator">:</span>      Vue<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
           Vue<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_7-vue3实现响应式"><a href="#_7-vue3实现响应式" class="header-anchor">#</a> 7.vue3实现响应式</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//通过Proxy(代理)：拦截对象中任意属性的变化，包括:属性值的读写，属性的添加，属性的删除等</span>
<span class="token comment">//通过Reflect(反射):对源对象的属性进行操作 是window上的一个内置对象</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'嘻嘻'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">19</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token punctuation">{</span>     <span class="token comment">//obj源对象</span>
        <span class="token number">1.</span> <span class="token comment">//有人读取p的某个属性时调用</span>
      <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>porpName<span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token comment">//target是源对象 ，porpName是访问的属性名    </span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">有人读取了p身上的</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>porpName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">属性</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token comment">//return target[porpName]</span>
        <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>porpName<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token number">2.</span> <span class="token comment">//有人修改p的某个属性、或给p追加某个属性时调用</span>
      <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>porpName<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">//value是新修改的值</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>porpName<span class="token punctuation">,</span>value<span class="token punctuation">)</span>
        <span class="token comment">//return target[porpName] = value</span>
         <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>porpName<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
       <span class="token number">3.</span> <span class="token comment">//有人删除p的某个属性时调用</span>
      <span class="token function">deleteProperty</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span>porpName</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">有人删除了p身上的</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>porpName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">属性,我要去更新了</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token comment">//return delete target[porpName] </span>
          <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">deleteProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>porpName<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="_8-reactive对比ref"><a href="#_8-reactive对比ref" class="header-anchor">#</a> 8.reactive对比ref</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//从定义数据角度对比</span>
<span class="token number">1</span><span class="token punctuation">.</span>ref用来定义<span class="token operator">:</span>基本数据类型
<span class="token number">2</span><span class="token punctuation">.</span>reactive用来定义<span class="token operator">:</span><span class="token function">对象</span><span class="token punctuation">(</span>或数组<span class="token punctuation">)</span>类型数据
<span class="token literal-property property">备注</span><span class="token operator">:</span><span class="token function">ref也可以用来定义对象</span><span class="token punctuation">(</span>或数组<span class="token punctuation">)</span>类型数据<span class="token punctuation">,</span>它内部会自动通过reactive转化为代理对象
<span class="token comment">//从原理角度对比:</span>
<span class="token number">1</span><span class="token punctuation">.</span>ref通过Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>的<span class="token keyword">get</span>和<span class="token keyword">set</span><span class="token function">来实现响应式</span><span class="token punctuation">(</span>数据劫持<span class="token punctuation">)</span>
<span class="token number">2.</span><span class="token function">reactive通过使用Proxy来实现响应式</span><span class="token punctuation">(</span>数据劫持<span class="token punctuation">)</span><span class="token punctuation">,</span>并通过Reflect操作源对象内部的数据
<span class="token comment">//从使用角度对比:</span>
<span class="token number">1</span><span class="token punctuation">.</span>ref定义的数据<span class="token operator">:</span>操作数据需要<span class="token punctuation">.</span>value<span class="token punctuation">,</span>读取数据时模板中直接读取不需要<span class="token punctuation">.</span>value
<span class="token number">2</span><span class="token punctuation">.</span>reactive定义的数据<span class="token operator">:</span>操作数据与读取数据<span class="token operator">:</span>均不需要<span class="token punctuation">.</span>value
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_9-setup的两个注意点"><a href="#_9-setup的两个注意点" class="header-anchor">#</a> 9.setup的两个注意点</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1</span><span class="token punctuation">.</span>setup执行的时机
在beforeCreate之前执行一次，<span class="token keyword">this</span>是<span class="token keyword">undefined</span>
<span class="token number">2</span><span class="token punctuation">.</span>setup的参数
<span class="token literal-property property">props</span><span class="token operator">:</span>值为对象，包括：组件外部传递过来，且组件内部声明接收了的属性
context：上下文对象
     attrs：值为对象，包括：组件外部传递过来，但没有在props配置中声明的属性，相当于<span class="token keyword">this</span><span class="token punctuation">.</span>$attrs
     <span class="token literal-property property">slots</span><span class="token operator">:</span>收到的插槽内容，相当于<span class="token keyword">this</span><span class="token punctuation">.</span>$slots
     <span class="token literal-property property">emit</span><span class="token operator">:</span>分发自定义事件的函数，相当于<span class="token keyword">this</span><span class="token punctuation">.</span>$emit
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
<span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
 <span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span>context</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token comment">//因为setup函数里面的this指向的是undefined，所以想要操作数据，就不能用this，所以提供了这两个参数</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_10-computed函数"><a href="#_10-computed函数" class="header-anchor">#</a> 10.computed函数</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>与vue2中的computed配置功能一致
<span class="token keyword">import</span> <span class="token punctuation">{</span>reactive<span class="token punctuation">,</span>computed<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">xing</span><span class="token operator">:</span><span class="token string">'张'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ming</span><span class="token operator">:</span><span class="token string">'三'</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// //  计算属性的简写形式</span>
  <span class="token comment">//  const quan = computed(()=&gt;{</span>
  <span class="token comment">//   return obj.xing + '-' +obj.ming</span>
  <span class="token comment">//  })</span>
  <span class="token comment">// 计算属性的完整写法</span>
  <span class="token keyword">const</span> quan <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> obj<span class="token punctuation">.</span>xing <span class="token operator">+</span> <span class="token string">'-'</span> <span class="token operator">+</span>obj<span class="token punctuation">.</span>ming
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">const</span> nameArr <span class="token operator">=</span>value<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span>
      obj<span class="token punctuation">.</span>xing <span class="token operator">=</span> nameArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
      obj<span class="token punctuation">.</span>ming <span class="token operator">=</span> nameArr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span><span class="token punctuation">{</span>
      obj<span class="token punctuation">,</span>
      quan
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="_11-wacth函数监听ref基本数据类型"><a href="#_11-wacth函数监听ref基本数据类型" class="header-anchor">#</a> 11.wacth函数监听ref基本数据类型</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">,</span>wacth<span class="token punctuation">,</span>reactive<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">const</span> sum <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
   <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'你好呀'</span><span class="token punctuation">)</span>
   <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
   <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'张三'</span><span class="token punctuation">,</span>
   <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">,</span>
    <span class="token literal-property property">jbs</span><span class="token operator">:</span><span class="token punctuation">{</span>
     <span class="token literal-property property">jb</span><span class="token operator">:</span><span class="token punctuation">{</span>
       <span class="token literal-property property">old</span><span class="token operator">:</span><span class="token number">1999</span>
     <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token number">1.</span> 情况一 ：监视ref所定义的一个响应式数据
   <span class="token comment">//wacth函数接收三个参数，第一个参数是需要监听的那个属性，第二个参数是函数，第三个参数是我们的配置对象，immediate:true</span>
   <span class="token comment">//一开始就执行一次回调</span>
   <span class="token function">watch</span><span class="token punctuation">(</span>sum<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sum发生了改变'</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">immediate</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token literal-property property">deep</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token number">2.</span><span class="token literal-property property">情况二</span><span class="token operator">:</span>监听ref所定义的多个响应式的数据
   <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>sum<span class="token punctuation">,</span>msg<span class="token punctuation">]</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span><span class="token parameter">oldValue</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sum或msg变了'</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>   <span class="token comment">//这个时候newValue是一个数组</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token number">3.</span>情况三：监听reactive所定义的数据
    <span class="token comment">//注意,当监听的值是对象时，强制开启的深度监听</span>
    <span class="token function">watch</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token comment">//这里的话newValue和oldValue是一样的</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token number">4.</span>情况四：监听reactive所定义的一个响应式对象中的某个属性
    <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>obj<span class="token punctuation">.</span>name<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token number">5.</span>情况五：监视reactive所定义的一个响应式数据中的某些属性
    <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>obj<span class="token punctuation">.</span>name<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>obj<span class="token punctuation">.</span>age<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">//特殊情况 当改变jbs中的old时，需要深度监听</span>
      <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>obj<span class="token punctuation">.</span>jbs<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
          
      <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token literal-property property">deep</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">)</span>
        
       <span class="token number">6.</span><span class="token function">watch第二个参数函数的第三个参数，即</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">,</span>onCleanup</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">void</span> 的 onCleanup 函数以及配置项的flush选项
       <span class="token function">watch</span><span class="token punctuation">(</span> sum <span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newVal <span class="token punctuation">,</span>oldVal <span class="token punctuation">,</span>onCleanup</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token comment">//onCleanup它会在下一次变化时处理上一次的副作用</span>
           <span class="token comment">//每次watch执行的时候，to值变了，引用变了</span>
           <span class="token comment">//引用，值都改变:纯变更</span>
           <span class="token comment">//实现防抖效果</span>
           <span class="token keyword">const</span> to <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
               console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span>
           <span class="token punctuation">}</span><span class="token punctuation">)</span>
           <span class="token function">onCleanup</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
               <span class="token function">clearTimeout</span><span class="token punctuation">(</span>to<span class="token punctuation">)</span>
           <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//数据改变 调用set 异步render (watch) 创建虚拟dom diff算法 (取到dom) patch(打补丁，更新需要更新的部分)</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>  
           <span class="token comment">//flush 选项的 post 相当于生命周期的 updated，pre 相当于 beforeUpdate</span>
           <span class="token comment">//配置项  post:diff算法之后(默认的) pre:同步执行 sync:同步执行</span>
           <span class="token comment">//pre是在数据更新(diff算法)之前执行，而sync是在页面更新之后执行</span>
           <span class="token literal-property property">flush</span><span class="token operator">:</span><span class="token string">'post'</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token keyword">return</span><span class="token punctuation">{</span>
       sum<span class="token punctuation">,</span>
       msg
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br></div></div><h2 id="_12-watch时value的问题"><a href="#_12-watch时value的问题" class="header-anchor">#</a> 12.watch时value的问题</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> sum <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'张三'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">job</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token literal-property property">j1</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token literal-property property">salary</span><span class="token operator">:</span><span class="token number">20</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//监听基本数据类型</span>
    <span class="token function">watch</span><span class="token punctuation">(</span>sum<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">//监听ref定义的对象 </span>
    <span class="token function">watch</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>value<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">//也可以</span>
     <span class="token function">wacth</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">deep</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//因为ref函数返回的是一个对象，对象中有一个value属性，这个value属性就是我们需要的数据,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="_13-watcheffect函数"><a href="#_13-watcheffect函数" class="header-anchor">#</a> 13.watchEffect函数</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//一般用来做调试</span>
<span class="token number">1</span><span class="token punctuation">.</span>watch的套路是：既要指明监视的属性，也要指明监视的回调
<span class="token number">2</span><span class="token punctuation">.</span>watchEffect的套路是：不用指明监视的属性，监视的回调中用到哪个属性，那就监听哪个属性
<span class="token literal-property property">watchEffect有点像computed</span><span class="token operator">:</span>
 <span class="token comment">//但computed注重的计算出来的值(回调函数的返回值)，所以必须要写返回值</span>
 <span class="token comment">//而watchEffect更注重的是过程(回调函数的函数体),所以不用写返回值</span>
watchEffect所指定的回调中用到的数据只要发生改变，则直接重新执行回调
<span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> x1 <span class="token operator">=</span> sum<span class="token punctuation">.</span>value
    <span class="token keyword">const</span> x2 <span class="token operator">=</span> person<span class="token punctuation">.</span>age
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'回调执行了'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token number">3</span><span class="token punctuation">.</span>watchEffect 无依赖时，可以作为生命周期的 mounted 和 unMounted 使用
<span class="token keyword">import</span> <span class="token punctuation">{</span> watchEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">onCleanup</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 注意，此处不要引用任何响应式变量</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;相当于 mounted&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">onCleanup</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;相当于 unMounted&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="_14-vue3中的生命周期"><a href="#_14-vue3中的生命周期" class="header-anchor">#</a> 14.vue3中的生命周期</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1</span><span class="token punctuation">.</span>beforeCreate <span class="token number">2</span><span class="token punctuation">.</span>created <span class="token number">3</span><span class="token punctuation">.</span>beforeMount <span class="token number">4</span><span class="token punctuation">.</span>mounted <span class="token number">5</span><span class="token punctuation">.</span>beforeUpdate <span class="token number">6</span><span class="token punctuation">.</span>updated <span class="token number">7</span><span class="token punctuation">.</span>beforeUnmount <span class="token number">8</span><span class="token punctuation">.</span>unmounted
<span class="token comment">//vue3也提供了组合式api形式的生命周期钩子,也就是在setup里面使用，需要引入,当然生命周期也可以跟setup同级使用，只是了解有这种</span>
beforeCreate  <span class="token operator">===</span><span class="token operator">&gt;</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
created  <span class="token operator">===</span><span class="token operator">&gt;</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
beforeMount  <span class="token operator">===</span><span class="token operator">&gt;</span> onBeforeMount
mounted  <span class="token operator">===</span><span class="token operator">&gt;</span> onMounted
beforeUpdate  <span class="token operator">===</span><span class="token operator">&gt;</span> onBeforeUpdate
updated  <span class="token operator">===</span><span class="token operator">&gt;</span> onUpdated
beforeUnmount  <span class="token operator">===</span><span class="token operator">&gt;</span> onBeforeUnmount
unmounted  <span class="token operator">===</span><span class="token operator">&gt;</span> onUnmounted
<span class="token comment">//如果说当setup里面的生命周期和我们在与setup同级定义的生命周期同时存在的话，setup里面的生命周期执行的优先级会高</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_15-自定义hook函数"><a href="#_15-自定义hook函数" class="header-anchor">#</a> 15.自定义hook函数</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>什么是hook<span class="token operator">?</span> <span class="token operator">--</span><span class="token operator">-</span>本质是一个函数，把setup函数中使用的组合式api进行了封装
类似于vue2中的mixin
<span class="token literal-property property">自定义hook的优势</span><span class="token operator">:</span>复用代码，让setup中的逻辑更清楚易懂
一般我们是在src下创建一个hooks文件夹，文件的名字一般用use开头<span class="token punctuation">.</span>js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_16-toref和torefs"><a href="#_16-toref和torefs" class="header-anchor">#</a> 16.toRef和toRefs</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>作用：创建一个ref对象，其value值指向另一个对象中的某个属性
语法：<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">)</span>
<span class="token literal-property property">应用</span><span class="token operator">:</span> 要将响应式对象中的某个属性单独提供给外部使用时
<span class="token literal-property property">扩展</span><span class="token operator">:</span>toRefs与toRef功能一致，但可以批量创建多个ref对象<span class="token punctuation">,</span><span class="token literal-property property">语法</span><span class="token operator">:</span><span class="token function">toRefs</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_17-shallowreactive与shallowref"><a href="#_17-shallowreactive与shallowref" class="header-anchor">#</a> 17.shallowReactive与shallowRef</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">shallowReactive</span> <span class="token operator">:</span><span class="token function">只处理对象最外层属性的响应式</span><span class="token punctuation">(</span>浅响应式<span class="token punctuation">)</span>
<span class="token literal-property property">shallowRef</span><span class="token operator">:</span>只处理基本数据类型的响应式，不进行对象的响应式处理
什么时候用：
<span class="token number">1.</span>如果有一个对象数据，结构比较深，但变化时只是外层属性变化<span class="token operator">===</span><span class="token operator">&gt;</span>shallowRactive
<span class="token number">2.</span>如果有一个对象数据，后续功能不会修改该对象中的属性，而是生成新的对象来替换 <span class="token operator">===</span><span class="token operator">&gt;</span>shallowRef
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_18-readonly与shallowreadonly"><a href="#_18-readonly与shallowreadonly" class="header-anchor">#</a> 18.readonly与shallowReadonly</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1</span><span class="token punctuation">.</span>readonly<span class="token operator">:</span><span class="token function">让一个响应式数据变为只读的</span><span class="token punctuation">(</span>都不能修改<span class="token punctuation">)</span>
<span class="token number">2</span><span class="token punctuation">.</span>shallowReadonly<span class="token operator">:</span><span class="token function">让一个响应式数据变为只读的</span><span class="token punctuation">(</span>浅只读，深层可以修改<span class="token punctuation">)</span>
<span class="token function">应用场景：不希望数据被修改时</span><span class="token punctuation">(</span>比如父组件传递给子组件的数据<span class="token punctuation">)</span>
<span class="token literal-property property">eag</span><span class="token operator">:</span>
<span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">12</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
       obj <span class="token operator">=</span> <span class="token function">readonly</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            obj
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_19-toraw与markraw"><a href="#_19-toraw与markraw" class="header-anchor">#</a> 19.toRaw与markRaw</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1</span><span class="token punctuation">.</span>toRaw<span class="token operator">:</span>
作用：将一个由reactive生成的响应式对象转化为普通对象
<span class="token literal-property property">使用场景</span><span class="token operator">:</span>用于读取响应式对象对应的普通对象，对这个普通对象的所有操作，不会引起页面更新
<span class="token number">2</span><span class="token punctuation">.</span>markRaw<span class="token operator">:</span>
<span class="token literal-property property">作用</span><span class="token operator">:</span>标记一个对象，使其永远不会再成为响应式对象
<span class="token literal-property property">应用场景</span><span class="token operator">:</span>
有些值不应被设置为响应式的，例如复杂的第三方类库
当渲染具有不可变数据源的大列表时，跳过响应式转换可以提高性能
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_20-customref"><a href="#_20-customref" class="header-anchor">#</a> 20.customRef</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>与ref的区别：ref是完整版的，customRef是简化版的
<span class="token literal-property property">作用</span><span class="token operator">:</span>创建一个自定义的ref，并对其依赖项跟踪和更新触发进行显式控制
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;ketWord&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>  ketWord<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>customRef<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 自己定义一个ref 名为myRef</span>
    <span class="token keyword">function</span> <span class="token function">myRef</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">let</span> timer
      <span class="token keyword">return</span> <span class="token function">customRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">track<span class="token punctuation">,</span>trigger</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">track</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//通知Vue追踪value的变化</span>
           <span class="token keyword">return</span> value
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span><span class="token punctuation">{</span>
              <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
              timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>  <span class="token comment">//防抖的效果</span>
                value <span class="token operator">=</span> newValue
              <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//通知Vue去重新解析模板</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token keyword">let</span> ketWord <span class="token operator">=</span> <span class="token function">myRef</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    ketWord
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="_21-provide和inject"><a href="#_21-provide和inject" class="header-anchor">#</a> 21.provide和inject</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>作用：实现祖先组件与后代组件之间的通信
套路：父组件有一个provide选项来提供数据，后代组件有一个inject选项来开始使用这些数据
<span class="token literal-property property">具体写法</span><span class="token operator">:</span>
<span class="token number">1.</span>祖组件中
<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> car <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'奔驰'</span><span class="token punctuation">,</span><span class="token literal-property property">price</span><span class="token operator">:</span><span class="token number">40</span>万<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'car'</span><span class="token punctuation">,</span>car<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token number">2.</span>后代组件中
<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> car <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'car'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> car<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_22-响应式数据的判断"><a href="#_22-响应式数据的判断" class="header-anchor">#</a> 22.响应式数据的判断</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1</span><span class="token punctuation">.</span>isRef<span class="token operator">:</span>检查一个值是否为一个ref对象
<span class="token number">2</span><span class="token punctuation">.</span>isReactive：检查一个对象是否是由reactive创建的响应式代理
<span class="token number">3</span><span class="token punctuation">.</span>isReadonly：检查一个对象是否是由readonly创建的只读代理
<span class="token number">4</span><span class="token punctuation">.</span>isProxy：检查一个对象是否是由reactive或者readonly方法创建的代理
<span class="token comment">//返回值是布尔值</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>isRef<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> sum <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isRef</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="_23-组合式api的优势"><a href="#_23-组合式api的优势" class="header-anchor">#</a> 23.组合式API的优势</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1</span><span class="token punctuation">.</span>vue2中的配置项api存在的问题
使用传统的options <span class="token constant">API</span>中，新增或者修改一个需求，就需要分别在data，methods，computed里修改，如果代码量很多，就会很乱
<span class="token number">2.</span>组合式api的优势
我们可以更加优雅的组织我们的代码，函数。让相关功能的代码更加有序的组织在一起，结合我们的hook函数更能体现出其优势
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_24-fragment"><a href="#_24-fragment" class="header-anchor">#</a> 24.Fragment</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1.</span>在vue2中：组件必须有一个根标签
<span class="token number">2.</span>在vue3中：组件可以没有根标签，内部会将多个标签包含在一个Fragment虚拟元素中
<span class="token literal-property property">好处</span><span class="token operator">:</span>减少标签层级，减少内存占用
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="data:image/png;base64,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" alt="Algolia搜索"></p> <h2 id="_25-teleport"><a href="#_25-teleport" class="header-anchor">#</a> 25.teleport</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>teleport 是一种能够将我们的组件的html结构移动到指定位置的技术
<span class="token operator">&lt;</span>teleport to<span class="token operator">=</span><span class="token string">&quot;移动位置&quot;</span><span class="token operator">&gt;</span> <span class="token comment">//我们一般写html和body 也可以写css选择器，一般用id</span>
    <span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;isShow&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;mask&quot;</span><span class="token operator">&gt;</span> <span class="token comment">//遮罩层</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span> <span class="token operator">=</span> <span class="token string">&quot;dialog&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span> 我是一个弹框 <span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;isShow = false&quot;</span><span class="token operator">&gt;</span>关闭弹窗<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>teleport<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_26-suspense"><a href="#_26-suspense" class="header-anchor">#</a> 26.Suspense</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>等待异步组件时渲染一些额外的内容，让应用有更好的用户体验
如果平时我们直接引入组件的话，app组件会等所有的组件加载完，才会展示页面，当网速较低时，我们可以异步引入组件，在配合Suspense，让app组件先渲染，再在Suspense中等待组件渲染时提供一些额外的内容
<span class="token number">1.</span>异步引入组件
<span class="token keyword">import</span> <span class="token punctuation">{</span>defineAsyncComponent<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">const</span> Child <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./components/Child.vue'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//要注册的，省略了</span>
使用Suspense包裹组件，并配置好<span class="token keyword">default</span>与fallback
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;div&quot;</span><span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>Suspense<span class="token operator">&gt;</span> <span class="token comment">//原理就是插槽，名字不能改，因为底层给slot命名是这样的</span>
  <span class="token operator">&lt;</span>template v<span class="token operator">-</span>slot<span class="token operator">:</span><span class="token keyword">default</span><span class="token operator">&gt;</span> <span class="token comment">//default是我们需要展示组件的地方</span>
    <span class="token operator">&lt;</span>Child<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Child<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>template v<span class="token operator">-</span>slot<span class="token operator">:</span>fallback<span class="token operator">&gt;</span>  <span class="token comment">//fallback是我们在网速加载很慢时，等待组件加载时，展示的内容</span>
    <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>加载中<span class="token operator">...</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="_27-vue3的调整"><a href="#_27-vue3的调整" class="header-anchor">#</a> 27.vue3的调整</h2> <p><img src="/myblog/assets/img/image-20230314210643901.15fb1914.png" alt="Algolia搜索"> <img src="/myblog/assets/img/image-20230314210703669.6d4580f3.png" alt="Algolia搜索"> <img src="/myblog/assets/img/image-20230314210710786.e2d6d031.png" alt="Algolia搜索"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1.</span>移除了过滤器 <span class="token number">2.</span>移除了native 如果父组件在子组件上绑定了事件，只要子组件没有声明那个事件，就不会默认认为是自定义事件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_28-数据副作用"><a href="#_28-数据副作用" class="header-anchor">#</a> 28.数据副作用</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1.</span>如果我们修改数据，仅仅只是为了修改数据，而vue帮我们既修改了数据，也更新了页面，这就叫数据的副作用
响应式对象ref的缺点：<span class="token number">1.</span>响应式丢失 <span class="token number">2.</span>只能代理对象
template想当于render函数
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>29.v-mome缓存视图</p></div></div> <!----> <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/myblog/pages/56c597/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">vue3移动端</div></a> <a href="/myblog/pages/f8e48e/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">react基础第一天</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/myblog/pages/56c597/" class="prev">vue3移动端</a></span> <span class="next"><a href="/myblog/pages/f8e48e/">react基础第一天</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/myblog/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/myblog/" class="router-link-active"><div>
            首页
            <!----></div></a> <span class="date"></span></dt></dl><dl><dd>02</dd> <dt><a href="/myblog/pages/94b8d4/"><div>
            setTimeout是怎么实现的
            <!----></div></a> <span class="date">07-07</span></dt></dl><dl><dd>03</dd> <dt><a href="/myblog/pages/0d2221/"><div>
            v8是怎样执行一段代码的
            <!----></div></a> <span class="date">07-07</span></dt></dl> <dl><dd></dd> <dt><a href="/myblog/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> <!----></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/myblog/assets/js/app.20d60f97.js" defer></script><script src="/myblog/assets/js/2.5c9bfcd5.js" defer></script><script src="/myblog/assets/js/7.c837cdb8.js" defer></script>
  </body>
</html>
